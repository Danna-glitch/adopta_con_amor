<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Adopta con Amor - Registrar Adoptante</title>
    <link rel="stylesheet" href="style.css">
    <style>
        /* Estilos espec√≠ficos para el formulario de registro de adoptante */
        .form-container, .historial-container {
            max-width: 650px;
            margin: 40px auto;
            padding: 30px;
            background-color: var(--color-fondo-secundario, #f7f7f7);
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            margin-bottom: 25px;
        }

        .form-container h3, .historial-container h3 {
             color: var(--color-primario-oscuro, #1a237e);
             border-bottom: 2px solid var(--color-secundario, #ff7043);
             padding-bottom: 10px;
             margin-bottom: 20px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: var(--color-primario-oscuro, #333);
        }

        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid var(--color-primario-claro, #ccc);
            border-radius: 5px;
            box-sizing: border-box;
            font-size: 16px;
        }
        
        /* Estilo para la secci√≥n de preguntas de pre-adopci√≥n */
        .pre-adopcion-section {
            padding: 15px;
            border: 1px dashed var(--color-secundario, #ff7043);
            border-radius: 8px;
            margin-bottom: 25px;
            background-color: #fff8f5;
        }
        .pre-adopcion-section h4 {
            color: var(--color-secundario, #ff7043);
            margin-top: 0;
        }

        .btn-submit {
            background-color: var(--color-primario-oscuro, #1a237e);
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 18px;
            transition: background-color 0.3s;
            width: 100%;
            margin-top: 10px;
        }
        .btn-submit:hover {
            background-color: var(--color-secundario, #ff7043);
        }
        
        /* Estilos del historial */
        #historial-list {
            list-style: none;
            padding: 0;
        }
        #historial-list li {
            background-color: #fff;
            border: 1px solid #ddd;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 5px;
            font-size: 0.95em;
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
        }
        .registro-info {
            flex-grow: 1;
            padding-right: 15px;
        }
        .animal-name {
            font-weight: bold;
            color: var(--color-primario-oscuro, #1a237e);
            font-size: 1.1em;
        }
        .registro-time {
            font-style: italic;
            font-size: 0.85em;
            color: #666;
            margin-top: 5px;
            display: block;
        }
        .btn-eliminar-individual {
            background-color: #ccc; 
            color: #555;
            padding: 6px 10px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.8em;
            transition: background-color 0.3s;
        }
        .btn-eliminar-individual:hover {
            background-color: #aaa;
        }
        .btn-limpiar {
            background-color: #333;
            color: white;
            padding: 8px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9em;
            float: right;
            transition: background-color 0.3s;
        }

        .logo-img {
            width: 100px;
            height: 100px;
            vertical-align: middle;
            margin-right: 10px;
        }
    </style>
</head>
<body>
    <header>
        <nav class="main-nav">
            <div class="logo">
                <img src="https://image2url.com/images/1760561820378-4dacd090-b93c-4b7f-8b24-f23c7d6cc7a3.png" alt="Logo Adopta con Amor" class="logo-img"> 
                <strong>Adopta con Amor</strong>
            </div>
            <ul>
                <li><a href="index.html">Adopci√≥n y Inicio</a></li>
                <li><a href="registro_cliente.html">Registrar Adoptante</a></li>
                <li><a href="registro_donacion.html">Donaciones de Dinero / Art√≠culos</a></li>
                <li><a href="tienda.html">Tienda y Productos</a></li>
                <li><a href="juegos.html">Jueguitos</a></li>
                <li><a href="denuncias.html">Denuncias de Maltrato</a></li>
                <li><a href="acerca_de.html">Acerca de Nosotros</a></li>
            </ul>
        </nav>
    </header>
    
    <main>
        <h2 style="text-align: center;">‚úçÔ∏è Formulario de Registro para Adopci√≥n</h2>
        <p style="text-align: center;">Completa tus datos y las preguntas de pre-adopci√≥n. ¬°Este es el primer paso!</p>

        <div class="form-container">
            <h3>Datos del Futuro Adoptante</h3>

            <!-- FORMULARIO CON FORMSPREE ACTIVADO -->
            <form id="adoptante-form" action="https://formspree.io/f/mnnlnngn" method="POST">
                <div class="form-group">
                    <label for="nombre_adoptante">Nombre Completo:</label>
                    <input type="text" id="nombre_adoptante" name="nombre_adoptante" required pattern="[A-Za-z√±√ë√°√©√≠√≥√∫√Å√â√ç√ì√ö\s]+" onkeypress="return validateText(event)">
                </div>
                
                <div class="form-group">
                    <label for="telefono">Tel√©fono de Contacto:</label>
                    <input type="text" id="telefono" name="telefono" required inputmode="numeric" pattern="[0-9]+" onkeypress="return validateNumber(event)" placeholder="Ej: 77712345">
                </div>

                <div class="form-group">
                    <label for="correo">Correo Electr√≥nico:</label>
                    <input type="email" id="correo" name="correo" required>
                </div>

                <hr style="border-color: #ddd; margin: 25px 0;">

                <div class="form-group">
                    <label for="animal_adoptar">üê∂ Animal que Deseas Adoptar:</label>
                    <select id="animal_adoptar" name="animal_adoptar" required>
                        <option value="">-- Selecciona un animal de la lista --</option>
                        <option value="Luna">Luna (Perro, 3 a√±os)</option>
                        <option value="Nala">Nala (Gato, 1 a√±o)</option>
                        <option value="Los 3 Mosqueteros">Los 3 Mosqueteros (Perro, 5 meses)</option>
                        <option value="Perlita">Perlita (Gato, 2 a√±os)</option>
                        <option value="Necky">Necky (Perro, 4 a√±os)</option>
                        <option value="Sasha">Sasha (Perro, 3 a√±os)</option>
                        <option value="Michi">Michi (Perro, 1 a√±o)</option>
                        <option value="Pancho">Pancho (Perro, 3 a√±os)</option>
                        <option value="Otro / No s√©">Otro / No s√© (Quiero orientaci√≥n)</option>
                    </select>
                </div>

                <div class="pre-adopcion-section">
                    <h4>Informaci√≥n de Pre-Adopci√≥n</h4>

                    <div class="form-group">
                        <label for="tipo_vivienda">¬øCu√°l es tu tipo de vivienda?</label>
                        <select id="tipo_vivienda" name="tipo_vivienda" required>
                            <option value="">-- Selecciona --</option>
                            <option value="Casa_Con_Patio">Casa con Patio/Jard√≠n</option>
                            <option value="Casa_Sin_Patio">Casa sin Patio</option>
                            <option value="Departamento">Departamento</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="otras_mascotas">¬øTienes otras mascotas?</label>
                        <select id="otras_mascotas" name="otras_mascotas" required>
                            <option value="">-- Selecciona --</option>
                            <option value="Si">S√≠</option>
                            <option value="No">No</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="experiencia">¬øTienes experiencia con mascotas?</label>
                        <select id="experiencia" name="experiencia" required>
                            <option value="">-- Selecciona --</option>
                            <option value="Mucha">Mucha</option>
                            <option value="Poca">Poca</option>
                            <option value="Ninguna">Ninguna</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="comentarios">Comentarios Adicionales:</label>
                        <textarea id="comentarios" name="comentarios" rows="2"></textarea>
                    </div>
                </div>
                
                <button type="submit" class="btn-submit">Enviar Solicitud de Adopci√≥n</button>
                <div id="registro-status" style="display:none; color:#4CAF50; text-align:center; font-weight:bold; margin-top:15px;"></div>
            </form>
        </div>

        <div class="historial-container">
            <h3>Historial Local de Solicitudes</h3>
            <button class="btn-limpiar" id="btn-limpiar-historial">Borrar TODO</button>
            <ul id="historial-list"></ul>
        </div>
    </main>

    <footer>
        <p>&copy; 2025 <strong>Adopta con Amor</strong> | Proyecto de protecci√≥n animal.</p>
    </footer>

    <script>
        // --- VALIDACIONES ---
        function validateNumber(e){const c=(e.which)?e.which:e.keyCode;if(c>31&&(c<48||c>57)){e.preventDefault();return false;}return true;}
        function validateText(e){const c=(e.which)?e.which:e.keyCode;const k=String.fromCharCode(c);const r=new RegExp(/^[A-Za-z√±√ë√°√©√≠√≥√∫√Å√â√ç√ì√ö\s]$/);if(c<32)return true;if(!r.test(k)){e.preventDefault();return false;}return true;}

        document.addEventListener('DOMContentLoaded',()=>{
            const form=document.getElementById('adoptante-form');
            const historialList=document.getElementById('historial-list');
            const btnLimpiar=document.getElementById('btn-limpiar-historial');
            const registroStatus=document.getElementById('registro-status');

            function obtenerRegistros(){const r=localStorage.getItem('registrosAdoptanteAdoptaAmor');return r?JSON.parse(r):[];}
            function guardarRegistros(r){localStorage.setItem('registrosAdoptanteAdoptaAmor',JSON.stringify(r));}
            function eliminarRegistro(ts){let r=obtenerRegistros();const n=r.filter(x=>x.timestamp!==ts);guardarRegistros(n);renderizarHistorial();alert('Registro eliminado.');}

            function renderizarHistorial(){
                const r=obtenerRegistros();historialList.innerHTML='';
                if(r.length===0){historialList.innerHTML='<li>No hay solicitudes registradas.</li>';btnLimpiar.style.display='none';return;}
                btnLimpiar.style.display='block';
                [...r].reverse().forEach(reg=>{
                    const li=document.createElement('li');
                    const f=new Date(reg.timestamp).toLocaleDateString(),h=new Date(reg.timestamp).toLocaleTimeString();
                    const info=document.createElement('div');
                    info.className='registro-info';
                    info.innerHTML=`<span class="animal-name">üê∂ ${reg.animal_adoptar}</span><br>
                    <strong>${reg.nombre_adoptante}</strong> | Vivienda: ${reg.tipo_vivienda.replace('_',' ')}
                    <span class="registro-time">üìÖ ${f} ‚è∞ ${h}</span>
                    <span class="registro-time">Mascotas: ${reg.otras_mascotas} | Exp: ${reg.experiencia}</span>`;
                    const del=document.createElement('button');
                    del.className='btn-eliminar-individual';del.textContent='Borrar Local';del.onclick=()=>{if(confirm('¬øBorrar este registro?'))eliminarRegistro(reg.timestamp);};
                    li.appendChild(info);li.appendChild(del);historialList.appendChild(li);
                });
            }

            form.addEventListener('submit',e=>{
                e.preventDefault();
                const nombre=document.getElementById('nombre_adoptante'),tel=document.getElementById('telefono');
                if(!nombre.checkValidity()||!tel.checkValidity()){alert('Revisa los campos.');return;}
                const nuevo={
                    timestamp:Date.now(),
                    nombre_adoptante:nombre.value,
                    telefono:tel.value,
                    correo:document.getElementById('correo').value,
                    animal_adoptar:document.getElementById('animal_adoptar').value,
                    tipo_vivienda:document.getElementById('tipo_vivienda').value,
                    otras_mascotas:document.getElementById('otras_mascotas').value,
                    experiencia:document.getElementById('experiencia').value,
                    comentarios:document.getElementById('comentarios').value
                };

                const registros=obtenerRegistros();registros.push(nuevo);guardarRegistros(registros);

                // --- ENV√çO A FORMSPREE ---
                const formData=new FormData(form);
                fetch(form.getAttribute("action"),{
                    method:"POST",
                    body:formData,
                    headers:{"Accept":"application/json"}
                })
                .then(resp=>{
                    if(resp.ok){
                        console.log("‚úÖ Enviado correctamente a Formspree");
                    }else{
                        console.error("‚ùå Error al enviar a Formspree");
                        alert("‚ö†Ô∏è Hubo un problema al enviar a Formspree");
                    }
                })
                .catch(err=>{
                    console.error("‚ö†Ô∏è Error de conexi√≥n con Formspree:",err);
                });

                registroStatus.textContent=`‚úÖ ¬°Solicitud enviada para ${nuevo.animal_adoptar}!`;
                registroStatus.style.display='block';
                form.reset();renderizarHistorial();
                setTimeout(()=>registroStatus.style.display='none',5000);
            });

            btnLimpiar.onclick=()=>{if(confirm('¬øBorrar todo el historial?')){localStorage.removeItem('registrosAdoptanteAdoptaAmor');renderizarHistorial();}};
            renderizarHistorial();
        });
    </script>
</body>
</html>
